<div class="card">
    <div class="card-header">
        <h2>活动日历</h2>
    </div>
    <div class="card-body">
        <div class="calendar-container">
            <div class="calendar-header">
                <div class="calendar-actions">
                    <button class="btn"><i class="fas fa-plus"></i> 添加活动</button>
                    <select class="calendar-view">
                        <option>月视图</option>
                        <option>周视图</option>
                        <option>日视图</option>
                    </select>
                </div>
                <div class="calendar-date-nav">
                    <button class="btn btn-icon"><i class="fas fa-chevron-left"></i></button>
                    <span class="current-date">2023年6月</span>
                    <button class="btn btn-icon"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-weekdays">
                    <div>周日</div>
                    <div>周一</div>
                    <div>周二</div>
                    <div>周三</div>
                    <div>周四</div>
                    <div>周五</div>
                    <div>周六</div>
                </div>
                <div class="calendar-days">
                    <div class="calendar-day prev-month">28</div>
                    <div class="calendar-day prev-month">29</div>
                    <div class="calendar-day prev-month">30</div>
                    <div class="calendar-day prev-month">31</div>
                    <div class="calendar-day">1</div>
                    <div class="calendar-day">2</div>
                    <div class="calendar-day">3</div>
                    <div class="calendar-day">4</div>
                    <div class="calendar-day">5</div>
                    <div class="calendar-day">6</div>
                    <div class="calendar-day">7</div>
                    <div class="calendar-day">8</div>
                    <div class="calendar-day">9</div>
                    <div class="calendar-day">10</div>
                    <div class="calendar-day">11</div>
                    <div class="calendar-day">12</div>
                    <div class="calendar-day">13</div>
                    <div class="calendar-day">14</div>
                    <div class="calendar-day">15
                        <div class="calendar-event event-primary">
                            <span class="event-time">19:00</span>
                            <span class="event-title">啤酒品鉴会</span>
                        </div>
                    </div>
                    <div class="calendar-day">16</div>
                    <div class="calendar-day">17</div>
                    <div class="calendar-day">18</div>
                    <div class="calendar-day">19</div>
                    <div class="calendar-day">20
                        <div class="calendar-event event-success">
                            <span class="event-time">20:00</span>
                            <span class="event-title">现场音乐</span>
                        </div>
                    </div>
                    <div class="calendar-day">21</div>
                    <div class="calendar-day">22</div>
                    <div class="calendar-day">23</div>
                    <div class="calendar-day">24</div>
                    <div class="calendar-day">25
                        <div class="calendar-event event-warning">
                            <span class="event-time">18:30</span>
                            <span class="event-title">新品发布</span>
                        </div>
                    </div>
                    <div class="calendar-day">26</div>
                    <div class="calendar-day">27</div>
                    <div class="calendar-day">28</div>
                    <div class="calendar-day">29</div>
                    <div class="calendar-day">30</div>
                    <div class="calendar-day next-month">1</div>
                    <div class="calendar-day next-month">2</div>
                    <div class="calendar-day next-month">3</div>
                    <div class="calendar-day next-month">4</div>
                    <div class="calendar-day next-month">5</div>
                    <div class="calendar-day next-month">6</div>
                    <div class="calendar-day next-month">7</div>
                    <div class="calendar-day next-month">8</div>
                </div>
            </div>
            
            <div class="upcoming-events">
                <h3>即将到来的活动</h3>
                <div class="event-list">
                    <div class="event-item">
                        <div class="event-date">
                            <div class="event-day">15</div>
                            <div class="event-month">六月</div>
                        </div>
                        <div class="event-details">
                            <h4>啤酒品鉴会</h4>
                            <p><i class="fas fa-clock"></i> 19:00 - 21:30</p>
                            <p><i class="fas fa-map-marker-alt"></i> 东四咖啡</p>
                        </div>
                        <div class="event-actions">
                            <button class="btn btn-sm">编辑</button>
                            <button class="btn btn-sm btn-outline">取消</button>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-date">
                            <div class="event-day">20</div>
                            <div class="event-month">六月</div>
                        </div>
                        <div class="event-details">
                            <h4>现场音乐</h4>
                            <p><i class="fas fa-clock"></i> 20:00 - 22:00</p>
                            <p><i class="fas fa-map-marker-alt"></i> 白塔寺店</p>
                        </div>
                        <div class="event-actions">
                            <button class="btn btn-sm">编辑</button>
                            <button class="btn btn-sm btn-outline">取消</button>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-date">
                            <div class="event-day">25</div>
                            <div class="event-month">六月</div>
                        </div>
                        <div class="event-details">
                            <h4>新品发布</h4>
                            <p><i class="fas fa-clock"></i> 18:30 - 20:30</p>
                            <p><i class="fas fa-map-marker-alt"></i> 东四咖啡</p>
                        </div>
                        <div class="event-actions">
                            <button class="btn btn-sm">编辑</button>
                            <button class="btn btn-sm btn-outline">取消</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // 当子模块加载完成后执行
    console.log('Dashboard Calendar 子模块加载完成');
    
    // 为添加活动按钮添加事件
    document.querySelector('.calendar-actions .btn').addEventListener('click', function() {
        console.log('点击添加活动按钮');
        alert('添加新活动');
    });
    
    // 为日期导航按钮添加事件
    document.querySelectorAll('.calendar-date-nav button').forEach(button => {
        button.addEventListener('click', function() {
            const isNext = this.querySelector('.fa-chevron-right');
            const dateSpan = document.querySelector('.current-date');
            
            if (isNext) {
                console.log('下一个月');
                dateSpan.textContent = '2023年7月';
            } else {
                console.log('上一个月');
                dateSpan.textContent = '2023年5月';
            }
        });
    });
    
    // 为日历日期添加点击事件
    document.querySelectorAll('.calendar-day').forEach(day => {
        day.addEventListener('click', function() {
            const dayNumber = this.textContent.trim().split('\n')[0];
            console.log('点击日期:', dayNumber);
            
            // 如果日期有活动，则显示活动详情
            const event = this.querySelector('.calendar-event');
            if (event) {
                const eventTitle = event.querySelector('.event-title').textContent;
                const eventTime = event.querySelector('.event-time').textContent;
                alert(`日期: 2023年6月${dayNumber}日\n活动: ${eventTitle}\n时间: ${eventTime}`);
            } else {
                alert(`日期: 2023年6月${dayNumber}日\n没有活动安排`);
            }
        });
    });
    
    // 为编辑按钮添加事件
    document.querySelectorAll('.event-actions .btn:first-child').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation(); // 阻止事件冒泡
            const eventItem = this.closest('.event-item');
            const eventTitle = eventItem.querySelector('h4').textContent;
            console.log('编辑活动:', eventTitle);
            alert('编辑活动: ' + eventTitle);
        });
    });
    
    // 为取消按钮添加事件
    document.querySelectorAll('.event-actions .btn-outline').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation(); // 阻止事件冒泡
            const eventItem = this.closest('.event-item');
            const eventTitle = eventItem.querySelector('h4').textContent;
            console.log('取消活动:', eventTitle);
            if (confirm('确定要取消活动 ' + eventTitle + ' 吗？')) {
                console.log('确认取消活动:', eventTitle);
                eventItem.remove();
            }
        });
    });
</script>

<style>
    .calendar-grid {
        display: flex;
        flex-direction: column;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .calendar-weekdays {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        background-color: #f3f4f6;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .calendar-weekdays div {
        padding: 10px;
        text-align: center;
        font-weight: 600;
        color: #4b5563;
    }
    
    .calendar-days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-template-rows: repeat(6, 1fr);
    }
    
    .calendar-day {
        min-height: 100px;
        padding: 10px;
        border-right: 1px solid #e5e7eb;
        border-bottom: 1px solid #e5e7eb;
        position: relative;
        cursor: pointer;
    }
    
    .calendar-day:hover {
        background-color: #f9fafb;
    }
    
    .prev-month, .next-month {
        color: #9ca3af;
        background-color: #f9fafb;
    }
    
    .calendar-event {
        margin-top: 5px;
        padding: 5px;
        border-radius: 4px;
        font-size: 12px;
        color: white;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    
    .event-primary {
        background-color: #4f46e5;
    }
    
    .event-success {
        background-color: #10b981;
    }
    
    .event-warning {
        background-color: #f59e0b;
    }
    
    .event-time {
        font-weight: 600;
        margin-right: 5px;
    }
    
    .upcoming-events {
        margin-top: 20px;
    }
    
    .event-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .event-item {
        display: flex;
        align-items: center;
        padding: 15px;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        background-color: white;
    }
    
    .event-date {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        background-color: #4f46e5;
        color: white;
        border-radius: 8px;
        margin-right: 15px;
    }
    
    .event-day {
        font-size: 24px;
        font-weight: 600;
        line-height: 1;
    }
    
    .event-month {
        font-size: 12px;
    }
    
    .event-details {
        flex: 1;
    }
    
    .event-details h4 {
        margin: 0 0 5px 0;
        color: #1f2937;
    }
    
    .event-details p {
        margin: 0;
        color: #6b7280;
        font-size: 14px;
    }
    
    .event-actions {
        display: flex;
        gap: 5px;
    }
</style> 